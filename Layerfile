# Set the image
FROM vm/ubuntu:18.04

MEMORY 2G

# Install nodejs and npm
RUN curl -sL https://deb.nodesource.com/setup_14.x | sudo -E bash -
RUN sudo apt-get install -y nodejs

# Install npm
RUN npm install npm@latest -g

# Install python3
RUN sudo apt-get install -y python3

# Install pip
RUN sudo apt-get install -y python3-pip

# Install Flask
RUN pip install Flask

# Install Vite
RUN npm install -g create-vite

COPY . .

# Run frontend using vite
<!-- RUN create-vite vite-project -->
RUN cd vite-project
RUN npm install
RUN BAKCKGROUND npm run build

# Run backend using Flask
<!-- RUN mkdir backend -->
RUN cd ../backend
RUN pip install -r requirements.txt
RUN python3 ./app.py

EXPOSE WEBSITE http://localhost:5173


<!-- # Layerfile

# Frontend (React) layer
frontend:
  # Specify the build directory for the frontend
  build_dir: vite-project/dist
  # Install dependencies and build React
  build:
    - cd vite-project
    - npm install
    - npm run build

# Backend (Flask) layer
backend:
  # Specify the Flask app directory
  app_dir: backend
  # Install dependencies for Flask
  setup:
    - cd backend
    - pip install -r requirements.txt
  # Run Flask server
  run:
    - cd backend
    - flask run --host=0.0.0.0 --port=4000

# Define layer dependencies if needed
# dependencies:
#   - frontend
#   - backend -->
